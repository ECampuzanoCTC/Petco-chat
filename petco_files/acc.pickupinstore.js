ACC.pickupinstore={_autoload:["bindClickPickupInStoreButton","bindClickPickupInStoreButton_eb","bindPickupButton","bindPickupClose","bindPickupInStoreSearch","bindAddtoCartPickupbutton","findStore"],storeId:"",unbindPickupPaginationResults:function()
{$(document).off("click","#colorbox .js-pickup-store-pager-prev")
$(document).off("click","#colorbox .js-pickup-store-pager-next")},bindPickupPaginationResults:function(totalItem,data)
{var listHeight=$("#colorbox .js-pickup-store-list").height();var $listitems=$("#colorbox .js-pickup-store-list > li");var listItemHeight=$listitems.height();var displayCount=5;var totalCount=totalItem;var curPos=0
$("#colorbox .js-pickup-store-pager-item-all").html(totalCount);$("#colorbox .store-navigation-pager").show();checkPosition();$(document).on("click","#colorbox .js-pickup-store-pager-prev",function(e){e.preventDefault();if($('#pagCurrent').val()>1){curPos=parseInt($('#pagCurrent').val())-1;}else{curPos=1;}
$('#pagCurrent').val(curPos);checkPosition("prev");})
$(document).on("click","#colorbox .js-pickup-store-pager-next",function(e){e.preventDefault();curPos=parseInt($('#pagCurrent').val())+1;$('#pagCurrent').val(curPos);checkPosition("next");})
function checkPosition(){var totalItem=$("#totalItems").val();var itemsxpage=3;var curPage=Math.ceil(totalItem/(itemsxpage-1));var curPos=parseInt($('#pagCurrent').val());var from=(curPos==1)?1:((curPos-1)*itemsxpage)+1
$("#colorbox .js-pickup-store-pager-item-from").html(from);var tocount=((from+itemsxpage)-1>totalCount)?totalCount:(from+itemsxpage)-1;if(from==1){$("#colorbox .js-pickup-store-pager-prev").hide()}else{$("#colorbox .js-pickup-store-pager-prev").show()}
if(tocount>=totalCount){$("#colorbox .js-pickup-store-pager-next").hide()}else{$("#colorbox .js-pickup-store-pager-next").show()}
$("#colorbox .js-pickup-store-pager-item-to").html(tocount);var listitems="";for(i=(from-1);i<tocount;i++){listitems+=ACC.pickupinstore.createListItemHtml(data["data"][i],i)}
$('#colorbox .js-pickup-store-list').html(listitems);var firstInput=$("#colorbox .js-pickup-store-input")[0];$(firstInput).click();$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").removeAttr("disabled");$("button#pickup-in-store-select-store").removeAttr("disabled");}},bindPickupInStoreQuantity:function(){$('.pdpPickupQtyPlus').click(function(e){e.preventDefault();var inputQty=$('.js-add-pickup-cart #pdpPickupAddtoCartInput');var currentVal=parseInt(inputQty.val());var maxVal=inputQty.data('max');if(!isNaN(currentVal)&&currentVal<maxVal){inputQty.val(currentVal+1);inputQty.change();}});$('.pdpPickupQtyMinus').click(function(e){e.preventDefault();var inputQty=$('.js-add-pickup-cart #pdpPickupAddtoCartInput');var currentVal=parseInt(inputQty.val());var minVal=inputQty.data('min');if(!isNaN(currentVal)&&currentVal>minVal){inputQty.val(currentVal-1);inputQty.change();}});$("body").on("keyup",".js-add-pickup-cart #pdpPickupAddtoCartInput",function(event){var input=$(event.target);input.val(this.value.match(/[0-9]*/));var value=input.val();});},bindPickupInStoreSearch:function()
{$(document).on('click','#pickupstore_location_search_button',function(e)
{ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(),$('#atCartPage').val(),$('#entryNumber').val(),$(this).parents('form').attr('action'));return false;});$(document).on('keypress','#locationForSearch',function(e)
{if(e.keyCode===13)
{e.preventDefault();ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(),$('#atCartPage').val(),$('input.entryNumber').val(),$(this).parents('form').attr('action'));return false;}});},bindAddtoCartPickupbutton:function(){$(document).on('click','button#pickup-in-store-add-to-cart',function(e){var storeID=$("#input-pickup-in-store-js-store-id").text();var productCode=$("#input-pickup-in-store-js-store-productcode").text();var qty=$("#qty").val();qty=$.trim(qty);if((storeID!=null&&storeID!='')&&(productCode!=null&&productCode!='')&&(qty!=null&&qty!='')){var url="/petco/en/store-pickup/cart/addCustom?productCodePost="+productCode+"&storeNamePost="+storeID+"&qty="+qty;$.ajax({url:url,contentType:"application/json",type:"POST",data:null,success:function(response)
{ACC.product.displayCartDetail(response);},error:function(error){alert("Ha ocurrido un error al agregar a carrito favor de intentarlo mas tarde, si el problema persiste llamar a servicio al cliente."+error);}});}else{alert("Ha ocurrido un error favor de intentarlo mas tarde, si el problema persiste llamar a servicio al cliente.");}});$(document).on('click','.pickUpMobile',function(e){$(".pickUpMobile").prop("disabled",true);var storeID=$("#input-pickup-in-store-js-store-id").text();var productCode=$("#input-pickup-in-store-js-store-productcode").text();var qty=$("#qty").val();qty=$.trim(qty);if((storeID!=null&&storeID!='')&&(productCode!=null&&productCode!='')&&(qty!=null&&qty!='')){var url="/petco/en/store-pickup/cart/addCustom?productCodePost="+productCode+"&storeNamePost="+storeID+"&qty="+qty;$.ajax({url:url,contentType:"application/json",type:"POST",data:null,success:function(response)
{ACC.product.displayCartDetail(response);},error:function(error){alert("Ha ocurrido un error al agregar a carrito favor de intentarlo mas tarde, si el problema persiste llamar a servicio al cliente."+error);}});}else{alert("Ha ocurrido un error favor de intentarlo mas tarde, si el problema persiste llamar a servicio al cliente.");}});$(".pickup-in-store-content ").hide();},bindPickupHereInStoreButtonClick:function()
{$(document).on('click','.pickup_add_to_bag_instore_button',function(e){$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());});$(document).on('click','.pickup_here_instore_button',function(e){$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());ACC.colorbox.close();});},locationSearchSubmit:function(location,cartPage,entryNumber,productCode,latitude,longitude)
{$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");$("button#pickup-in-store-select-store").attr("disabled","disabled");$.ajax({url:productCode,data:{locationQuery:location,cartPage:cartPage,entryNumber:entryNumber,latitude:latitude,longitude:longitude},type:"post",success:function(response)
{ACC.pickupinstore.refreshPickupInStoreColumn(response);$('span.glyphicon.glyphicon-map-marker').click();}});},createListItemHtml:function(data,id){var district="";if(data.district!=""){district=", "+data.district;}
var postalCode="";if(data.postalCode!=""){postalCode=". "+data.postalCode;}
var regionName="";if(data.regionName!=""){regionName=", "+data.regionName;}
var phone="";if(data.phone!=""){phone=data.phone;}else{phone="N/A";}
var item="";item+='<li class="pickup-store-list-entry">';item+='<input type="radio" name="storeNamePost" value="'+data.name+'" id="pickup-entry-'+id+'" class="js-pickup-store-input" data-id="'+id+'">';item+='<label for="pickup-entry-'+id+'" class="js-select-store-label">';item+='<span> <button class="btn btn-link logoPop"></button> </span>';item+='<span class="pickup-store-info" style="padding-left: 20px;">';item+='<span class="pickup-store-list-entry-name">'+data.displayName+'</span>';item+='<span class="pickup-store-list-entry-address">'+data.line1+'&nbsp;'+data.line2+' <br> '+district+'</span>';item+='<span class="pickup-store-list-entry-city">'+data.town+''+regionName+' <br>  C.P'+postalCode+' <br> Tel.&nbsp;'+phone+'</span>';item+='</span>';item+='<span class="store-availability">';item+='<span class="available">'+data.formattedDistance+'<br>'+data.stockPickup+'</span>';item+='</span>';item+='</label>';item+='</li>';return item;},refreshPickupInStoreColumn:function(data){if(data.length==17){$("button#pickup-in-store-select-store").hide();}else{$("button#pickup-in-store-select-store").show();}
data=$.parseJSON(data);var listitems="";var itemsxpage=3;$("#totalItems").val(data["data"].length);var curPage=Math.ceil(data["data"].length/(itemsxpage-1))
var curPos=parseInt($('#pagCurrent').val());var totalItem=data["data"].length;var from=(curPos==1)?1:((curPos-1)*itemsxpage)+1;$("#colorbox .js-pickup-component").data("data",data);var end=(data["data"].length<itemsxpage?data["data"].length:itemsxpage);for(i=0;i<end;i++){listitems+=ACC.pickupinstore.createListItemHtml(data["data"][i],i)}
$('#colorbox .js-pickup-store-list').html(listitems);ACC.pickupinstore.unbindPickupPaginationResults();ACC.pickupinstore.bindPickupPaginationResults(totalItem,data);var firstInput=$("#colorbox .js-pickup-store-input")[0];$(firstInput).click();$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").removeAttr("disabled");$("button#pickup-in-store-select-store").removeAttr("disabled");},bindClickPickupInStoreButton:function()
{$(document).on("click",".js-pickup-in-store-button",function(e){e.preventDefault();var ele=$(this);var productId="pickupModal_"+$(this).attr('id');var cartItemProductPostfix='';var productIdNUM=$(this).attr('id');productIdNUM=productIdNUM.split("_");productIdNUM=productIdNUM[1];var entryNumber=$(this).attr("data-entryNumber");var origin=$(this).attr("origin");if(productId!==null)
{cartItemProductPostfix='_'+productId;}
var boxContent=$("#noeb > #popup_store_pickup_form > #pickupModal").clone();var titleHeader=$('#noeb > #pickupTitle > .pickup-header').html();ACC.colorbox.open(titleHeader,{html:boxContent,width:"960px",onComplete:function(){$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");$("button#pickup-in-store-select-store").attr("disabled","disabled");if(entryNumber!=undefined)
$("button#pickup-in-store-select-store").attr("data-entryNumber",entryNumber);if(origin!=undefined)
$("button#pickup-in-store-select-store").attr("origin",origin);boxContent.show();ACC.pickupinstore.pickupStorePager();var tabs=$("#colorbox .js-pickup-tabs").accessibleTabs({tabhead:'.tabhead',tabbody:'.tabbody',fx:'show',fxspeed:0,currentClass:'active',autoAnchor:true,cssClassAvailable:true});$("#colorbox #pickupModal *").each(function()
{if($(this).attr("data-id")!=undefined)
{$(this).attr("id",$(this).attr("data-id"));$(this).removeAttr("data-id");}});$("#colorbox input#locationForSearch").focus();$("#colorbox #pickupModal").attr("id",productId);$("#colorbox #"+productId+" .thumb").html(ele.data("img"));$("#colorbox #"+productId+" .js-pickup-product-price").html(ele.data("productcart"));var variants=ele.data("productcartVariants");var variantsOut="";$.each(variants,function(key,value){variantsOut+="<span>"+value+"</span>";})
$("#colorbox #"+productId+" .js-pickup-product-variants").html(variantsOut);$("#colorbox  #"+productId+" .js-pickup-product-info").html(ele.data("productname"))
$("#colorbox #"+productId+" form.searchPOSForm").attr("action",ele.data("actionurl"));$("#colorbox #"+productId+" form.searchPOSForm").attr("id","pickup_in_store_search_form_product_"+productIdNUM);$("#colorbox #"+productId+" #pdpPickupAddtoCartInput").attr("value",($('#pdpPickupAddtoCartInput').val()!==undefined?$('#pdpPickupAddtoCartInput').val():ele.data("value")));$("#colorbox #"+productId+" input#entryNumber").attr("value",ele.data("entrynumber"));$("#colorbox #"+productId+" input#atCartPage").attr("value",ele.data("cartpage"));if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){ACC.pickupinstore.locationSearchSubmit('',$('#atCartPage').val(),ele.data("entrynumber"),ele.data("actionurl"),position.coords.latitude,position.coords.longitude);},function(){ACC.pickupinstore.locationSearchSubmit('',$('#atCartPage').val(),ele.data("entrynumber"),ele.data("actionurl"),null,null);},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message);});}
ACC.product.bindToAddToCartStorePickUpForm();}});})},bindClickPickupInStoreButton_eb:function()
{$(document).on("click",".js-pickup-in-store-button_eb",function(e){e.preventDefault();var ele=$(this);var productId="pickupModal_"+$(this).attr('id');var cartItemProductPostfix='';var productIdNUM=$(this).attr('id');productIdNUM=productIdNUM.split("_");productIdNUM=productIdNUM[1];var entryNumber=$(this).attr("data-entryNumber");var origin=$(this).attr("origin");if(productId!==null)
{cartItemProductPostfix='_'+productId;}
var boxContent=$("#eb > #popup_store_pickup_form > #pickupModal").clone();var titleHeader=$('#eb > #pickupTitle > .pickup-header').html();ACC.colorbox.open(titleHeader,{html:boxContent,width:"960px",onComplete:function(){$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");$("button#pickup-in-store-select-store").attr("disabled","disabled");if(entryNumber!=undefined)
$("button#pickup-in-store-select-store").attr("data-entryNumber",entryNumber);if(origin!=undefined)
$("button#pickup-in-store-select-store").attr("origin",origin);boxContent.show();ACC.pickupinstore.pickupStorePager();var tabs=$("#colorbox .js-pickup-tabs").accessibleTabs({tabhead:'.tabhead',tabbody:'.tabbody',fx:'show',fxspeed:0,currentClass:'active',autoAnchor:true,cssClassAvailable:true});$("#colorbox #pickupModal *").each(function()
{if($(this).attr("data-id")!=undefined)
{$(this).attr("id",$(this).attr("data-id"));$(this).removeAttr("data-id");}});$("#colorbox input#locationForSearch").focus();$("#colorbox #pickupModal").attr("id",productId);$("#colorbox #"+productId+" .thumb").html(ele.data("img"));$("#colorbox #"+productId+" .js-pickup-product-price").html(ele.data("productcart"));var variants=ele.data("productcartVariants");var variantsOut="";$.each(variants,function(key,value){variantsOut+="<span>"+value+"</span>";})
$("#colorbox #"+productId+" .js-pickup-product-variants").html(variantsOut);$("#colorbox  #"+productId+" .js-pickup-product-info").html(ele.data("productname"))
$("#colorbox #"+productId+" form.searchPOSForm").attr("action",ele.data("actionurl"));$("#colorbox #"+productId+" form.searchPOSForm").attr("id","pickup_in_store_search_form_product_"+productIdNUM);$("#colorbox #"+productId+" #pdpPickupAddtoCartInput").attr("value",($('#pdpPickupAddtoCartInput').val()!==undefined?$('#pdpPickupAddtoCartInput').val():ele.data("value")));$("#colorbox #"+productId+" input#entryNumber").attr("value",ele.data("entrynumber"));$("#colorbox #"+productId+" input#atCartPage").attr("value",ele.data("cartpage"));if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){ACC.pickupinstore.locationSearchSubmit('',$('#atCartPage').val(),ele.data("entrynumber"),ele.data("actionurl"),position.coords.latitude,position.coords.longitude);},function(){ACC.pickupinstore.locationSearchSubmit('',$('#atCartPage').val(),ele.data("entrynumber"),ele.data("actionurl"),null,null);},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message);});}
ACC.product.bindToAddToCartStorePickUpForm();}});})},pickupStorePager:function()
{$(document).on("change","#colorbox .js-pickup-store-input",function(e){e.preventDefault();$("#colorbox .js-pickup-tabs li.first a").click();var storeData=$("#colorbox .js-pickup-component").data("data");storeData=storeData["data"];var storeId=$(this).data("id");var $ele=$("#colorbox .display-details");$.each(storeData[storeId],function(key,value){if(key=="url"){if(value!=""){$ele.find(".js-store-image").html('<img src="'+value+'" alt="" />');}else{$ele.find(".js-store-image").html('');}}else if(key=="productcode"){$ele.find(".js-store-productcode").val(value);}
else if(key=="openings"){if(value!=""){var $oele=$ele.find(".js-store-"+key);var openings="";$.each(value,function(key2,value2){openings+="<dt>"+key2+"</dt>";openings+="<dd>"+value2+"</dd>";});$oele.html(openings);}else{$ele.find(".js-store-"+key).html('');}}
else if(key=="specialOpenings"){}
else{if(value!=""){$ele.find(".js-store-"+key).html(value);}else{$ele.find(".js-store-"+key).html('');}}
if(key=="stockLevel"){$("div.js-store-pickup-stock").text(value);}})
$(document).one("click","#colorbox .js-pickup-map-tab",function(){ACC.pickupinstore.storeId=storeData[storeId];ACC.global.addGoogleMapsApi("ACC.pickupinstore.drawMap");})
var e=$("#colorbox .pickup-store-list-entry input:checked");$("#add_to_cart_storepickup_form .js-store-id").attr("id",e.attr("id"))
$("#add_to_cart_storepickup_form .js-store-id").attr("name",e.attr("name"))
$("#add_to_cart_storepickup_form .js-store-id").val(e.val())
if(storeData[storeId]["stockLevel"]>0||storeData[storeId]["stockLevel"]=="")
{var input=$("#add_to_cart_storepickup_form .js-qty-selector-input");input.data("max",storeData[storeId]["stockLevel"]);ACC.productDetail.checkQtySelector(input,"reset");$("#add_to_cart_storepickup_form").show();$("button#pickup-in-store-select-store").show();}else{$("#add_to_cart_storepickup_form").hide();$("button#pickup-in-store-select-store").hide();}
$('span.glyphicon.glyphicon-map-marker').click();})
$(document).on("click",".js-regresar-pickup",function(e){$("#colorbox .js-pickup-component").removeClass("show-store");})
$(document).on("click",".js-select-store-label",function(e){$("#colorbox .js-pickup-component").addClass("show-store");$("#colorbox #cboxTitle .headline-inner").addClass('hidden-xs hidden-sm');$("#colorbox #cboxTitle .back-to-storelist").removeClass('hidden-xs hidden-sm');})
$(document).on("click",".js-back-to-storelist",function(e){$("#colorbox .js-pickup-component").removeClass("show-store");$("#colorbox #cboxTitle .headline-inner").removeClass('hidden-xs hidden-sm');$("#colorbox #cboxTitle .back-to-storelist").addClass('hidden-xs hidden-sm');})
$(document).on("click","button#pickup-in-store-select-store",function(e){var storeId=$("#add_to_cart_storepickup_form .pickup-in-store-js-store-id").val();var productCode=$("#add_to_cart_storepickup_form  .pickup-in-store-js-store-productcode").val();var storeName=$("div.name.js-store-displayName").text();var storeTown=$("div.js-store-town").text();var entryNumber=$(this).attr("data-entryNumber");var origin=$(this).attr("origin");if(origin=="eb_cartPage")
{$("#entryNumber_eb_"+entryNumber).val(entryNumber);$("#storeName_eb_"+entryNumber).val(storeId);$("#updateBuyType_eb_"+entryNumber).submit();}else if(origin=="cartPage")
{$("#entryNumber_"+entryNumber).val(entryNumber);$("#storeName_"+entryNumber).val(storeId);$("#updateBuyType_"+entryNumber).submit();}else
{$("p.pickup-without-select > b").html(storeName+"<b class='glyphicon-map-marker pickup-in-store-icon'></b>");$("b.glyphicon-map-marker.pickup-in-store-icon").css('font-family','Glyphicons Halflings');$("b.glyphicon-map-marker.pickup-in-store-icon").css('margin','0px 3px');$("#input-pickup-in-store-js-store-id").text(storeId);$("#input-pickup-in-store-js-store-productcode").text(productCode);$("#pickupInTheStoreStickyButtonComponent").prop("disabled",false);}
$("#pickup-in-store-add-to-cart").prop("disabled",false);$(".pickUpMobile").prop("disabled",false);var stockLevel=$("div.js-store-pickup-stock").text();var lastValue=$.trim(stockLevel);$("div#temp-last-value-pickup").text(lastValue);var currentValue=$("#js-option-select-qty option:selected").text();if(currentValue!="0"&&lastValue!="0"){$('#js-option-select-qty').empty();lastValue=parseInt(lastValue)>15?15:lastValue;for(var n=1;n<=parseInt(lastValue);++n){$('select#js-option-select-qty').append($('<option>',{value:n,text:n}));}
if(parseInt(currentValue)>parseInt(lastValue)){$("#js-option-select-qty").val(lastValue);}else{$("#js-option-select-qty").val(currentValue)}}
$.colorbox.close();})},bindPickupButton:function(){$(document).on("click",".js-pickup-button",function(e){e.preventDefault();$e=$(this).parent().nextAll(".js-inline-layer")
$e.addClass("open")
var h=$e.height()
$e.removeClass("open")
$e.animate({height:h})})},bindPickupClose:function(){$(document).on("click",".js-close-inline-layer",function(e){e.preventDefault();$e=$(this).parents(".js-inline-layer")
$e.animate({height:0})})},checkIfPointOfServiceIsEmpty:function(cartEntryDeliveryModeForm)
{return(!cartEntryDeliveryModeForm.find('.pointOfServiceName').text().trim().length);},validatePickupinStoreCartEntires:function()
{var validationErrors=false;$("form.cartEntryShippingModeForm").each(function()
{var formid="#"+$(this).attr('id');if($(formid+' input[value=pickUp][checked]').length&&ACC.pickupinstore.checkIfPointOfServiceIsEmpty($(this)))
{$(this).addClass("shipError");validationErrors=true;}});if(validationErrors)
{$('div#noStoreSelected').show().focus();$(window).scrollTop(0);}
return validationErrors;},drawMap:function(){storeInformation=ACC.pickupinstore.storeId;if($("#colorbox .js-map-canvas").length>0)
{$("#colorbox .js-map-canvas").attr("id","pickup-map")
var centerPoint=new google.maps.LatLng(storeInformation["storeLatitude"],storeInformation["storeLongitude"]);var mapOptions={zoom:13,zoomControl:true,panControl:true,streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,center:centerPoint}
var map=new google.maps.Map(document.getElementById("pickup-map"),mapOptions);var marker=new google.maps.Marker({position:new google.maps.LatLng(storeInformation["storeLatitude"],storeInformation["storeLongitude"]),map:map,title:storeInformation["name"],icon:"https://maps.google.com/mapfiles/marker"+'A'+".png"});var infowindow=new google.maps.InfoWindow({content:storeInformation["name"],disableAutoPan:true});google.maps.event.addListener(marker,'click',function(){infowindow.open(map,marker);});}},findStore:function(){var productCode=$("span.code").text();if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){ACC.pickupinstore.findStoresByInformation(productCode,position.coords.latitude,position.coords.longitude);},function(){ACC.pickupinstore.findStoresByInformation(productCode,"","");},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message);});}else{ACC.pickupinstore.findStoresByInformation(productCode,"","");}},findStoresByInformation:function(productCode,latitude,longitude){$.ajax({url:ACC.config.encodedContextPath+"/store-pickup/storeForProductCode",data:{productCode:productCode,latitude:latitude,longitude:longitude},type:"post",async:false,success:function(pointOfServiceStockData)
{if(pointOfServiceStockData!=undefined&&pointOfServiceStockData.stockData!=null){var stockQty=pointOfServiceStockData.stockData.stockLevel;var pointName=pointOfServiceStockData.displayName;var pointCode=pointOfServiceStockData.name;if(stockQty!=""&&pointName!=""&&pointCode!=""){var town=pointOfServiceStockData.address.town;$("#pickup-in-store-add-to-cart").prop("disabled",false);$("div#input-pickup-in-store-js-store-id").text(pointCode);$("div#input-pickup-in-store-js-store-productcode").text(productCode);$("p.pickup-without-select > b").html(pointName+"<b class='glyphicon-map-marker pickup-in-store-icon'></b>");$("b.glyphicon-map-marker.pickup-in-store-icon").css('font-family','Glyphicons Halflings');$("b.glyphicon-map-marker.pickup-in-store-icon").css('margin','0px 3px');$("div.temp-last-value-pickup").text(stockQty>15?15:stockQty);$("div.js-store-pickup-stock").text(stockQty>15?15:stockQty);$("#pickupInTheStoreStickyButtonComponent").prop("disabled",false);}}},error:function(e){console.log("Ha ocurrido un error al procesar la peticion, error: "+e);}});}};