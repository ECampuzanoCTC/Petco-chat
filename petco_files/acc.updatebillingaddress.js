ACC.updatebillingaddress={bindCycleFocusEvent:function()
{$('#lastInTheForm').blur(function()
{$('#paymentDetailsForm [tabindex$="10"]').focus();})},updateBillingAddressForm:function()
{var newAddress=$('#differentAddress').attr("checked");if(newAddress){$('input[name="billingAddress.firstName"]').val(document.getElementById("first_Name").value);$('input[name="billingAddress.lastName"]').val(document.getElementById("last_Name").value);$('input[name="billingAddress.middleName"]').val(document.getElementById("middle_Name").value);$('input[name="billingAddress.townCity"]').val(document.getElementById("town_City").value);$('input[name="billingAddress.postcode"]').val(document.getElementById("post_code").value);$('input[name="billingAddress.district"]').val(document.getElementById("district").value);$('input[name="billingAddress.streetName"]').val(document.getElementById("line1").value);$('input[name="billingAddress.streetNumber"]').val(document.getElementById("streetNumber").value);$('select[name="billingAddress.regionIso"]').val(document.getElementById("region_Iso").value);$('input[name="billingAddress.interiorNo"]').val(document.getElementById("interiorNo").value);$('input[name="billingAddress.primaryPhone"]').val(document.getElementById("telephone").value);}
var newAddress=$('#newAddress').val();if(newAddress){$('#differentAddress2').removeAttr('checked');$('#differentAddress').attr("checked","checked");}},updateBillingAddressForm2:function()
{$('#differentAddress').removeAttr('checked');$('#differentAddress2').attr("checked","checked");$('input[name="billingAddress.firstName"]').val("");$('input[name="billingAddress.lastName"]').val("");$('input[name="billingAddress.townCity"]').val("");$('input[name="billingAddress.postcode"]').val("");$('select[name="billingAddress.regionIso"]').val("");$('select[name="billingAddress.bussinesActivity"]').val("");$('input[name="billingAddress.streetName"]').val("");$('input[name="billingAddress.line2"]').val("");$('input[name="billingAddress.RFC"]').val("");$('input[name="billingAddress.district"]').val("");$('input[name="billingAddress.interiorNo"]').val("");$('input[name="billingAddress.streetNumber"]').val("");$('input[name="billingAddress.primaryPhone"]').val("");$('input[name="billingAddress.middleName"]').val("");},submitFormForPaypalPayment:function()
{$("#submitPaypal").click(function(){$("#billingAddressForm").submit();});},displayBillingForm:function(){$("#billingAddress\\.requireBill").click(ACC.updatebillingaddress.hideOrShowBillingForm);ACC.updatebillingaddress.hideOrShowBillingForm();},hideOrShowBillingForm:function(){$("#billingAddress\\.requireBill").removeAttr('checked');if($("#billingAddress\\.requireBill").is(":checked")){ACC.updatebillingaddress.showBillingForm();}else{ACC.updatebillingaddress.hideBillingForm();}},showBillingForm:function(){$("div.form_redio_left").show();$("div#newBillingAddressFields").show();$("div.content-button-display-billingAddresses, button#viewBillingAddressBook").show();},hideBillingForm:function(){$("div.form_redio_left").hide();$("div#newBillingAddressFields").hide();$("div.content-button-display-billingAddresses, button#viewBillingAddressBook").hide();},policyForPaymentWithCheck:function(){$("#policyForPaymentWithCheck").on('click',function(event){event.preventDefault();$.colorbox({href:$(this).attr("href"),iframe:true,height:"200px",onComplete:function(){ACC.common.refreshScreenReaderBuffer();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});},displayBillingAddresses:function(){$("button#viewBillingAddressBook").on('click',function(event){event.preventDefault();var data=$("#savedAddressListHolder").html();$.colorbox({height:false,html:data,onComplete:function()
{ACC.updatebillingaddress.fillOutBillingForm();ACC.updatebillingaddress.showBillingAddresses();$(this).colorbox.resize();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});},fillOutBillingForm:function(){$("button.positive.left.select.billingAddress").on('click',function(event){event.preventDefault();var idParent=$(this).parent().attr("id");var form={};$("#"+idParent+" > div.form.fields :input").each(function(){form[$(this).attr("name")]=$(this).val();});$("input[name='billingAddress\\.RFC']").val(form.rfc);$("select[name='billingAddress\\.bussinesActivity']").val(form.businessActivity);$("input[name='billingAddress\\.company']").val(form.companyName);$("input[name='billingAddress\\.firstName']").val(form.firstName);$("input[name='billingAddress\\.middleName']").val(form.middleName);$("input[name='billingAddress\\.lastName']").val(form.lastName);$("input[name='billingAddress\\.streetName']").val(form.streetName);$("input[name='billingAddress\\.streetNumber']").val(form.streetNumber);$("input[name='billingAddress\\.interiorNo']").val(form.interiorNo);$("input[name='billingAddress\\.district']").val(form.district);$("input[name='billingAddress\\.townCity']").val(form.town);$("input[name='billingAddress\\.postcode']").val(form.pCode);$("select[name='billingAddress\\.regionIso']").val(form.regionIso);$("input[name='billingAddress\\.primaryPhone']").val(form.phone1);$.colorbox.close();ACC.razonsocial.hideInputOnChangeSelect();});},showBillingAddresses:function(){$("button.remove.billingAddress").on('click',function(event){event.preventDefault();var idParent=$(this).parent().attr("id");var content=$("#"+idParent+" > ul").html();var data="<ul>"+content+"</ul>";var question="<div>¿Está seguro de que desea eliminar estos datos de facturación?</div>";var buttonYes="<div id = 'ofyes-content' ><a class = 'ofyes button removeBillingAddressCB' >Si</a><input type = 'hidden' value = 'true' /></div>";var buttonNo="<div id = 'ofno-content' ><a class = 'ofno button removeBillingAddressCB' >No</a><input type = 'hidden' value = 'false' /></div>";var div="<div></div>";var obj={};var contextPath=$("#"+idParent+" > div.remove.billingAddress :input").each(function(){obj[$(this).attr("name")]=$(this).val();});$.colorbox({height:"300px",width:"500px",html:"<div style = 'padding:30px;' >"+data+question+buttonYes+buttonNo+"</div>",onComplete:function(){ACC.updatebillingaddress.removeBillingAddress(obj);},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});},removeBillingAddress:function(data){$("a.removeBillingAddressCB").on('click',function(){var idParent=$(this).parent().attr("id");var option=$("div#"+idParent+" > input");var alertPositive="<div class = 'alert negative' ></div>";var messagePositive="Ocurrió un problema al remover los datos de facturación";if(option.val()=="true"){$.ajax({url:data.request,type:'POST',data:{addressCode:data.addressCode},success:function(data){location.reload();},error:function(xhr,status,errorThrown){$("div#globalMessages").append(alertNegative);$("div#globalMessages > div.alert.negative").append(messageNegative);}});}else{$.colorbox.close();}});},accountRemoveBillingAddress:function(){$("a.removeBillingAddressButton").on('click',function(){var idBillingAddress=$(this).data("billingAddressId");var content=$("div#billingAddress-"+idBillingAddress).html();var options=$("#popup_confirm_billingAddress_removal_"+idBillingAddress).html();$.colorbox({height:false,html:$(content).append(options),onComplete:function(){$(this).colorbox.resize();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});}}
$(document).ready(function()
{ACC.updatebillingaddress.updateBillingAddressForm();ACC.updatebillingaddress.submitFormForPaypalPayment();ACC.silentorderpost.displayStartDateIssueNum();ACC.updatebillingaddress.displayBillingForm();ACC.updatebillingaddress.policyForPaymentWithCheck();ACC.updatebillingaddress.displayBillingAddresses();ACC.updatebillingaddress.accountRemoveBillingAddress();if($("#differentAddress").length>0)
{$("#differentAddress").click(function()
{ACC.updatebillingaddress.updateBillingAddressForm();});$("#differentAddress2").click(function()
{ACC.updatebillingaddress.updateBillingAddressForm2();});}
else
{$("#newBillingAddressFields :input").removeAttr('disabled');}
$('#paymentDetailsForm [tabindex="1"]').change(function()
{ACC.silentorderpost.displayStartDateIssueNum();});ACC.updatebillingaddress.bindCycleFocusEvent();});