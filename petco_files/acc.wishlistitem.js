ACC.wishlistitem={_autoload:["bindCartItemWishList"],submitTriggered:false,processingMessage:$("<img src='"+ACC.config.commonResourcePath+"/images/spinner.gif'/>"),bindCartItemWishList:function()
{},refreshWishList:function(e,quantity,wishList){var form=$(e).closest('form');var entryNumber=form.find('input[name=entryNumber]').val();var productCode=form.find('input[name=productCode]').val();var isSaveLater=form.find('input[name=isSaveLater]').val();if(wishList=='favorite'){var formAddToCart=$('#addToCartFormFavorite_'+entryNumber);}else{var formAddToCart=$('#addToCartFormSaveLater_'+entryNumber);}
formAddToCart.find('input[name=quantity]').val(quantity);var method="POST";$.ajax({url:'/my-account/wish-list/update',data:{entryNumber:entryNumber,productCode:productCode,isSaveLater:isSaveLater,quantity:quantity},type:method,success:function(data,textStatus,xhr){var favoriteDiv=document.getElementById("favoriteTab");var saveLaterDiv=document.getElementById("saveLaterTab");if(wishList=='favorite'){$('#refreshFavorite').load('wish-list #refreshFavorite');saveLaterDiv.style.display="none";favoriteDiv.style.display="block";}else{$('#refreshLater').load('wish-list #refreshLater');saveLaterDiv.style.display="block";favoriteDiv.style.display="none";}},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl");var connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});},removeEntryWishList:function(e,wishList){var form=$(e).closest('form');var entryNumber=form.find('input[name=entryNumber]').val();var productCode=form.find('input[name=productCode]').val();var shoppingListName=form.find('input[name=shoppingListName]').val();var favoriteDiv=document.getElementById("favorite_"+entryNumber);var laterDiv=document.getElementById("later_"+entryNumber);var method="POST";$.ajax({url:'/my-account/wish-list/remove',data:{productCode:productCode,shoppingListName:shoppingListName,entryNumber:entryNumber},type:method,beforeSend:function(){if(wishList=='favorite')
favoriteDiv.style.display="none";else
laterDiv.style.display="none";},success:function(data,textStatus,xhr){if(wishList=='favorite'){$('#favoriteButtonDiv').load('wish-list #favoriteButtonDiv');$('#refreshFavorite').load('wish-list #refreshFavorite');}else{$('#saveLaterButtonDiv').load('wish-list #saveLaterButtonDiv');$('#refreshLater').load('wish-list #refreshLater');}},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl");var connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});},handleKeyEvent:function(elementRef,event)
{if(event.which==13&&!ACC.wishlistitem.submitTriggered)
{ACC.wishlistitem.submitTriggered=ACC.wishlistitem.handleUpdateQuantity(elementRef,event);return false;}
else
{if(ACC.wishlistitem.submitTriggered)
{return false;}}
return true;},handleUpdateQuantity:function(elementRef,event)
{var form=$(elementRef).closest('form');var isSaveLater=form.find('input[name=isSaveLater]').val();if(isSaveLater=="1"){form=$('#updateCartFormSaveLater');}else{form=$('#updateCartFormFavorite');}
var productCode=form.find('input[name=productCode]').val();var initialCartQuantity=form.find('input[name=initialQuantity]').val();var newCartQuantity=form.find('input[name=quantity]').val();if(initialCartQuantity!=newCartQuantity)
{ACC.track.trackUpdateCart(productCode,initialCartQuantity,newCartQuantity);return true;}
return false;},refreshWishListComponent:function(e,quantity){var form=$(e).closest('form');var entryNumber=form.find('input[name=entryNumber]').val();var productCode=form.find('input[name=productCode]').val();var isSaveLater=form.find('input[name=isSaveLater]').val();var formAddToCart=$('#addToCartFormSaveLater_'+entryNumber);formAddToCart.find('input[name=quantity]').val(quantity);var method="POST";$.ajax({url:'/my-account/wish-list/cart/update',data:{entryNumber:entryNumber,productCode:productCode,isSaveLater:isSaveLater,quantity:quantity},type:method,success:function(data,textStatus,xhr){$('#refreshLaterUpdate').load('# #refreshLaterUpdate');},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl");var connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});},blockLinkProcessingMessage:function(submitButton)
{var form=submitButton.parents('form:first');form.block({message:ACC.wishlistitem.processingMessage});},refreshSaverLaterComponent:function(e){var form=$(e).closest('form');var entryNumber=form.find('input[name=entryNumber]').val();var productCode=form.find('input[name=productCode]').val();var shoppingListName=form.find('input[name=shoppingListName]').val();var initialCartQuantity=form.find('input[name=initialQuantity]');var user=form.find('input[name=user]');var redirectLogin=form.find('input[name=redirectLogin]');var quantity=1;if(user.val()=="anonymous"||redirectLogin.val()=="true"){ACC.wishlistitem.blockLinkProcessingMessage($(e));window.location=ACC.config.encodedContextPath+'/login/checkout';}else{var method="POST";$.ajax({url:'/my-account/wish-list/saveLater',data:{entryNumber:entryNumber,productCode:productCode,shoppingListName:shoppingListName,quantity:quantity},type:method,beforeSend:function(){ACC.wishlistitem.blockLinkProcessingMessage($(e));},success:function(data,textStatus,xhr){window.location=ACC.config.encodedContextPath+'/cart';},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl");var connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});}},removeEntrySaveLaterComponentCart:function(entryNumber,productCode,shoppingListName,source,review,e,redirectLogin,sizeWish){var method="POST";var laterDiv=document.getElementById("elementWish_"+entryNumber);var baseSaveLater=document.getElementById("baseSaveLater");var headSaveLater=document.getElementById("headSaveLater");$.ajax({url:'/my-account/wish-list/cart/remove',data:{entryNumber:entryNumber,productCode:productCode,shoppingListName:shoppingListName},type:method,beforeSend:function(){if(review){laterDiv.style.display="none";if(sizeWish<2){baseSaveLater.style.display="none";headSaveLater.style.display="none";}}},success:function(data,textStatus,xhr){if(source=="component"){if(redirectLogin=="true")
window.location=ACC.config.encodedContextPath+'/login/checkout';else
$('#cart-wrapper').load('# #cart-wrapper');}else{window.location=ACC.config.encodedContextPath+'/cart';}},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl");var connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});},addFavorite:function(e,type){var form=$(e).closest('form');var entryNumber=form.find('input[name=entryNumber]').val();var productCode=form.find('input[name=productCode]').val();var shoppingListName=form.find('input[name=shoppingListName]').val();var origen=form.find('input[name=origen]');var user=form.find('input[name=user]');var redirectLogin=form.find('input[name=redirectLogin]');var quantity=1;if(user.val()=="anonymous"||redirectLogin.val()=="true"){ACC.wishlistitem.blockLinkProcessingMessage($(e));window.location=ACC.config.encodedContextPath+'/login/checkout';}else{var method="GET";$.ajax({url:'/my-account/wish-list/addFavorite?productCode='+productCode+'&quantity='+quantity+'&origen='+origen+'&shoppingListName='+shoppingListName,type:method,beforeSend:function(){switch(type){case 'standar':$('#buttonFavoriteStandar_'+entryNumber).prop('disabled',true);break;case 'first':$('#buttonFavoriteFirst_'+entryNumber).prop('disabled',true);break;case 'recurring':$('#buttonFavoriteRecurring_'+entryNumber).prop('disabled',true);break;case 'EB':$('#buttonFavoriteEb').prop('disabled',true);break;case 'pickUp':$('#buttonFavoritePickUp').prop('disabled',true);break;}},success:function(data,textStatus,xhr){window.location=ACC.config.encodedContextPath+'/my-account/wish-list';},error:function(xhr,textStatus,error){var redirectUrl=xhr.getResponseHeader("redirectUrl");var connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});}}};